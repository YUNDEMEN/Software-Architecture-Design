**在阿里的编码规范中约束的分层如下图**
<a href="https://ibb.co/zZTMn0x"><img src="https://i.ibb.co/Wf4hxY5/image.png" alt="image" border="0"></a>

# 代码优化分层
<a href="https://ibb.co/vB8JPmv"><img src="https://i.ibb.co/fS7CptG/1-2.png" alt="1-2" border="0"></a>

# 分层领域模型的转换
<a href="https://ibb.co/NSXBMgD"><img src="https://i.ibb.co/74HmqxM/2.png" alt="2" border="0"></a>

# 1. 代码如何按照阿里的编码规范中的约束进行分层
  * 1 开放接口层规范：      可直接封装 Service 方法暴露成 RPC 接口;通过 Web 封装成 http 接口;**进行网关安全控制、流量控制**等，就是说开放接口层有两种接口接入： **1 RPC 接口  2 HTTP接口**
      开放接口层代码实现：  最上层 Controller 和 TService 是我们阿里分层规范里面的第一层：**轻业务逻辑，参数校验，异常兜底**，通常这种接口可以轻易更换接口类型，所以业务逻辑必须要轻，甚至不做
                          具体逻辑，如果我们把业务编排放在 Controller 层去做的话，如果以后我们要接入RPC框架 Thrift，我们这里又需要把业务编排在做一次，这样会导致我们每接入一个入口层，这个
                          业务编排代码都得重新复制一份，这样大量的重复工作必定会导致我们开发效率下降，所以我们需要把**业务编排逻辑都得放进 Service 中去做**
  
  * 2 终端显示层规范：各个端的模板渲染并执行显示的层。当前主要是 velocity 渲染，JS 渲染，JSP 渲染，移动端展示等
  
  * 3 Web 层规范：主要是对访问控制进行转发，各类基本参数校验，或者不复用的业务简单处理等
  
  * 4 Service 层规范：相对具体的业务逻辑服务层，业务层，复用性较低，这里推荐每一个 Controller 方法都得对应一个 Service
  
  * 5 Manager 层规范：通用业务处理层---对第三方平台封装的层，预处理返回结果及转化异常信息，对 Service 层通用能力的下沉，如缓存方案、中间件通用处理。与 DAO 层交互，对多个 DAO 的组合复用
                                     可复用逻辑层。这里的 Mannager 可以是单个服务的，比如我们的 Cache，MQ 等等，当然也可以是复合的。当你需要调用多个 Mannager 的时候，这个可以合为一个
                                     Mannager，比如逻辑上的连表查询等。如果是 httpMannager 或 rpcMannager 需要在这一层做一些数据转换              
  
  * 6 DAO 层规范：     数据访问层，与底层 MySQL、Oracle、Hbase 进行数据交互
      DAO 层代码实现： 数据库访问层。主要负责“操作数据库的某张表，映射到某个 Java 对象”，DAO 应该只允许自己的 Service 访问，其他 Service 要访问我的数据必须通过对应的 Service



# 2. 分层架构的风格
  * 大型机架构风格（Mainframe）
  * [原始分布式架构风格（Distributed）](https://icyfenix.cn/architecture/architect-history/primitive-distribution.html)
  * [Spring Boot 实现单体架构（Monolithic）](https://icyfenix.cn/architecture/architect-history/monolithic.html)
  * [Spring Cloud 实现微服务架构](https://icyfenix.cn/exploration/projects/microservice_arch_springcloud.html)
  * [Kubernetes 为基础设施的微服务架构](https://icyfenix.cn/exploration/projects/microservice_arch_kubernetes.html)
  * 后微服务架构风格：云原生时代（Cloud Native）
    * [后微服务时代: Istio 为基础设施的服务网格架构（Service Mesh）](https://icyfenix.cn/exploration/projects/servicemesh_arch_istio.html)
  * [AWS Lambda 为基础的无服务架构（Serverless）](https://icyfenix.cn/exploration/projects/serverless_arch.html)
  * CQRS模式架构
    * [SpringBoot+CQRS微服务设计模式教程](https://www.jdon.com/55380) 






# 用用的参考

* [优秀的代码都是如何分层的](https://developer.51cto.com/art/202103/652080.htm)
